import{u as t}from"./chunk-ula1UdWb.js";import{a as n}from"./chunk-Czrwg_dh.js";import{l as s}from"./chunk-CNMp7qr_.js";import{s as e}from"./chunk-m8XeXVsD.js";import{u as a}from"./chunk-BdxN9jtc.js";import{z as i,r as o,a as c,I as r,R as u,$ as l,u as m,F as p,Y as b,J as k}from"./chunk-Bxt8shZV.js";import"./chunk-P8XhL4_m.js";import"./chunk-Dn6aMA63.js";import"./chunk-DvCEEdEu.js";import"./chunk-CRUM6r23.js";import"./chunk-BK5RcqpZ.js";import"./chunk-yuijXVOs.js";import"./chunk-C6Zwkpkb.js";import"./chunk-BA-TsAJo.js";import"./chunk-BLnK4V6m.js";import"./chunk-Ca9d1kJd.js";import"./chunk-l1vifrK4.js";import"./chunk-B_LJwPrj.js";import"./chunk-Cjrd7Wf_.js";import"./chunk-lNurITel.js";const h={class:"flex gap-3"},f={for:"explore"},d=["accept"],j={class:"btn btn-primary btn-sm"},g={class:"p-0"},v={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},y={class:"flex gap-3"},x=["onClick"],C=["onClick"],w=i({__name:"MusicConfig",setup(i){const{t:w}=a(),M=o(0),I=s.createInstance({name:"audioStore"}),S=t().globalConfig,{getMusicList:D}=e(S),L=o("audio/*"),N=o(D);function T(){S.resetMusicList(),I.clear()}function _(){S.clearMusicList(),I.clear()}async function q(){(await I.keys()).length>0&&I.iterate(((t,n)=>{S.addMusic({id:n+(new Date).getTime().toString(),name:n,url:"Storage"})}))}async function z(t){if(!/audio*/.test(t.target.files[0].type))return void(M.value=3);const{dataUrl:s,fileName:e}=await n(t.target.files[0]);I.setItem("".concat((new Date).getTime().toString(),"+").concat(e),s).then((()=>{M.value=1,q()})).catch((()=>{M.value=2}))}return c((()=>{q()})),(t,n)=>(k(),r("div",null,[u("div",h,[u("button",{class:"btn btn-primary btn-sm",onClick:T},l(m(w)("button.reset")),1),u("label",f,[u("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:z},null,40,d),u("span",j,l(m(w)("button.upload")),1)]),u("button",{class:"btn btn-error btn-sm",onClick:_},l(m(w)("button.allDelete")),1)]),u("div",null,[u("ul",g,[(k(!0),r(p,null,b(N.value,(t=>(k(),r("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[u("div",v,[u("span",null,l(t.name),1)]),u("div",y,[u("button",{class:"btn btn-primary btn-xs",onClick:n=>async function(t){S.setCurrentMusic(t,!1)}(t)},l(m(w)("button.play")),9,x),u("button",{class:"btn btn-error btn-xs",onClick:n=>function(t){S.removeMusic(t.id),I.removeItem(t.name)}(t)},l(m(w)("button.delete")),9,C)])])))),128))])])]))}});export{w as default};
