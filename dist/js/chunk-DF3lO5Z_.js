const t=2147483647,n=36,o=/^xn--/,e=/[^\0-\x7F]/,r=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s=Math.floor,i=String.fromCharCode;function l(t){throw new RangeError(c[t])}function f(t,n){const o=t.split("@");let e="";o.length>1&&(e=o[0]+"@",t=o[1]);const c=function(t,n){const o=[];let e=t.length;for(;e--;)o[e]=n(t[e]);return o}((t=t.replace(r,".")).split("."),n).join(".");return e+c}const u=function(t,n){return t+22+75*(t<26)-((0!=n)<<5)},a=function(t,o,e){let r=0;for(t=e?s(t/700):t>>1,t+=s(t/o);t>455;r+=n)t=s(t/35);return s(r+36*t/(t+38))},h={toASCII:function(o){return f(o,(function(o){return e.test(o)?"xn--"+function(o){const e=[];o=function(t){const n=[];let o=0;const e=t.length;for(;o<e;){const r=t.charCodeAt(o++);if(r>=55296&&r<=56319&&o<e){const e=t.charCodeAt(o++);56320==(64512&e)?n.push(((1023&r)<<10)+(1023&e)+65536):(n.push(r),o--)}else n.push(r)}return n}(o);const r=o.length;let c=128,f=0,h=72;for(const t of o)t<128&&e.push(i(t));const p=e.length;let d=p;for(p&&e.push("-");d<r;){let r=t;for(const t of o)t>=c&&t<r&&(r=t);const g=d+1;r-c>s((t-f)/g)&&l("overflow"),f+=(r-c)*g,c=r;for(const v of o)if(v<c&&++f>t&&l("overflow"),v===c){let t=f;for(let o=n;;o+=n){const r=o<=h?1:o>=h+26?26:o-h;if(t<r)break;const c=t-r,l=n-r;e.push(i(u(r+c%l,0))),t=s(c/l)}e.push(i(u(t,0))),h=a(f,g,d===p),f=0,++d}++f,++c}return e.join("")}(o):o}))},toUnicode:function(e){return f(e,(function(e){return o.test(e)?function(o){const e=[],r=o.length;let c=0,i=128,f=72,u=o.lastIndexOf("-");u<0&&(u=0);for(let t=0;t<u;++t)o.charCodeAt(t)>=128&&l("not-basic"),e.push(o.charCodeAt(t));for(let p=u>0?u+1:0;p<r;){const u=c;for(let e=1,i=n;;i+=n){p>=r&&l("invalid-input");const u=(h=o.charCodeAt(p++))>=48&&h<58?h-48+26:h>=65&&h<91?h-65:h>=97&&h<123?h-97:n;u>=n&&l("invalid-input"),u>s((t-c)/e)&&l("overflow"),c+=u*e;const a=i<=f?1:i>=f+26?26:i-f;if(u<a)break;const d=n-a;e>s(t/d)&&l("overflow"),e*=d}const d=e.length+1;f=a(c-u,d,0==u),s(c/d)>t-i&&l("overflow"),i+=s(c/d),c%=d,e.splice(c++,0,i)}var h;return String.fromCodePoint(...e)}(e.slice(4).toLowerCase()):e}))}};export{h as p};
