import{u as t}from"./chunk-CugN1iRH.js";import{a as n}from"./chunk-Czrwg_dh.js";import{l as s}from"./chunk-BIn6qnQq.js";import{s as e}from"./chunk-DrcNqKZP.js";import{u as a}from"./chunk-CmNriTaI.js";import{z as i,r as o,a as r,I as c,R as u,$ as l,u as m,F as p,Y as b,J as k}from"./chunk-D7BOcSyB.js";import"./chunk-Xjp0aulL.js";import"./chunk-DSek3MSI.js";import"./chunk-DvCEEdEu.js";import"./chunk-BWwx0SQ1.js";import"./chunk-CYfUI5Ys.js";import"./chunk-DwMdLFrw.js";import"./chunk-C6Zwkpkb.js";import"./chunk-BA-TsAJo.js";import"./chunk-BLnK4V6m.js";import"./chunk-DSeHMosA.js";import"./chunk-DC1XHIpb.js";import"./chunk-DE2u7Mu7.js";import"./chunk-Cjrd7Wf_.js";import"./chunk-BT_ACNP_.js";const h={class:"flex gap-3"},f={for:"explore"},d=["accept"],j={class:"btn btn-primary btn-sm"},g={class:"p-0"},v={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},y={class:"flex gap-3"},x=["onClick"],C=["onClick"],w=i({__name:"MusicConfig",setup(i){const{t:w}=a(),M=o(0),I=s.createInstance({name:"audioStore"}),S=t().globalConfig,{getMusicList:D}=e(S),L=o("audio/*"),$=o(D);function N(){S.resetMusicList(),I.clear()}function T(){S.clearMusicList(),I.clear()}async function _(){(await I.keys()).length>0&&I.iterate(((t,n)=>{S.addMusic({id:n+(new Date).getTime().toString(),name:n,url:"Storage"})}))}async function q(t){if(!/audio*/.test(t.target.files[0].type))return void(M.value=3);const{dataUrl:s,fileName:e}=await n(t.target.files[0]);I.setItem(`${(new Date).getTime().toString()}+${e}`,s).then((()=>{M.value=1,_()})).catch((()=>{M.value=2}))}return r((()=>{_()})),(t,n)=>(k(),c("div",null,[u("div",h,[u("button",{class:"btn btn-primary btn-sm",onClick:N},l(m(w)("button.reset")),1),u("label",f,[u("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:q},null,40,d),u("span",j,l(m(w)("button.upload")),1)]),u("button",{class:"btn btn-error btn-sm",onClick:T},l(m(w)("button.allDelete")),1)]),u("div",null,[u("ul",g,[(k(!0),c(p,null,b($.value,(t=>(k(),c("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[u("div",v,[u("span",null,l(t.name),1)]),u("div",y,[u("button",{class:"btn btn-primary btn-xs",onClick:n=>async function(t){S.setCurrentMusic(t,!1)}(t)},l(m(w)("button.play")),9,x),u("button",{class:"btn btn-error btn-xs",onClick:n=>function(t){S.removeMusic(t.id),I.removeItem(t.name)}(t)},l(m(w)("button.delete")),9,C)])])))),128))])])]))}});export{w as default};
