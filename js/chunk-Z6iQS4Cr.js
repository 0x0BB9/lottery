import{u as a,g as e}from"./chunk-ula1UdWb.js";import{a as s}from"./chunk-Czrwg_dh.js";import{l as t}from"./chunk-CNMp7qr_.js";import{s as n}from"./chunk-m8XeXVsD.js";import{u as r}from"./chunk-BdxN9jtc.js";import{z as l,r as o,a as i,w as c,I as u,R as m,L as p,$ as h,u as d,F as v,Y as k,C as g,J as f}from"./chunk-Bxt8shZV.js";import"./chunk-P8XhL4_m.js";import"./chunk-Dn6aMA63.js";import"./chunk-DvCEEdEu.js";import"./chunk-CRUM6r23.js";import"./chunk-BK5RcqpZ.js";import"./chunk-yuijXVOs.js";import"./chunk-C6Zwkpkb.js";import"./chunk-BA-TsAJo.js";import"./chunk-BLnK4V6m.js";import"./chunk-Ca9d1kJd.js";import"./chunk-l1vifrK4.js";import"./chunk-B_LJwPrj.js";import"./chunk-Cjrd7Wf_.js";import"./chunk-lNurITel.js";const j={class:"toast toast-top toast-end"},b={key:0,class:"alert alert-error"},y={key:1,class:"alert alert-success"},w={key:2,class:"alert alert-error"},I={class:""},x={for:"explore"},C=["accept"],S={class:"btn btn-primary btn-sm"},q={class:"p-0"},F={class:"flex items-center gap-8"},L={class:"avatar h-14"},N={class:"w-12 h-12 mask mask-squircle hover:w-14 hover:h-14"},T={class:"w-64"},_={class:"overflow-hidden font-bold whitespace-nowrap text-ellipsis"},z=["onClick"],D=l({__name:"ImageConfig",setup(l){const{t:D}=r(),J=a().globalConfig,{getImageList:R}=n(J),U=o("image/*"),Y=o(0),$=t.createInstance({name:"imgStore"});async function A(a){if(!/image*/.test(a.target.files[0].type))return void(Y.value=3);const{dataUrl:e,fileName:t}=await s(a.target.files[0]);$.setItem("".concat((new Date).getTime().toString(),"+").concat(t),e).then((()=>{Y.value=1,async function(){(await $.keys()).length>0&&$.iterate(((a,e)=>{J.addImage({id:e,name:e,url:"Storage"})}))}()})).catch((()=>{Y.value=2}))}return i((()=>{})),c((()=>Y.value),(a=>{0!==a&&setTimeout((()=>{Y.value=0}),2e3)})),(a,s)=>(f(),u(v,null,[m("div",j,[2===Y.value?(f(),u("div",b,[m("span",null,h(d(D)("error.uploadFail")),1)])):p("",!0),1===Y.value?(f(),u("div",y,[m("span",null,h(d(D)("error.uploadSuccess")),1)])):p("",!0),3===Y.value?(f(),u("div",w,[m("span",null,h(d(D)("error.notImage")),1)])):p("",!0)]),m("div",null,[m("div",I,[m("label",x,[m("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:U.value,onChange:A},null,40,C),m("span",S,h(d(D)("button.upload")),1)])]),m("ul",q,[(f(!0),u(v,null,k(d(R),(a=>(f(),u("li",{key:a.id,class:"mb-3"},[m("div",F,[m("div",L,[m("div",N,[g(e,{"img-item":a},null,8,["img-item"])])]),m("div",T,[m("div",_,h(a.name),1)]),m("div",null,[m("button",{class:"btn btn-error btn-xs",onClick:e=>function(a){"Storage"===a.url&&$.removeItem(a.id).then((()=>{J.removeImage(a.id)})),J.removeImage(a.id)}(a)},h(d(D)("button.delete")),9,z)])])])))),128))])])],64))}});export{D as default};
